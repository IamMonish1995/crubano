function generateStars(size, amount, variations, layer, ext) {
	for (i = 1; i < amount; i++) {
		if (size === "one") {
			var num = i;
		} else {
			var num = 1 + Math.floor(Math.random() * variations);
		}
		$(layer).append('<div class="star"><img src="' + templateDir + '/_/images/stars/' + size + num + '.' + ext + '"></div>');
	}
	$(layer + ' .star').each(function () {
		var randX = 1 + Math.floor(Math.random() * $(layer).width()),
			randY = 1 + Math.floor(Math.random() * $(layer).height());
		$(this).css({ 'left': randX, 'top': randY });
	});
};

function flyingObject(objNum) {
	var randObj = 1 + Math.floor(Math.random() * 11);
	var flip = 1 + Math.floor(Math.random() * 100);
	objNum = (typeof objNum === "undefined") ? randObj : objNum;
	var speedMultiply = 10 * (1 + Math.floor(Math.random() * 3)),
		$layer = $('#flyby'),
		img = new Image();
	img.onload = function () {
		switch (objNum) {

			case 3:
				$layer.append('<div class="ufo flying sway"><img src="' + templateDir + '/_/images/flying/fo' + objNum + '.png"></div>');
				if (flip < 50) {
					$('.ufo img').addClass('flipped');
				}
				break;

			case 9:
				$layer.append('<div class="ufo flying" id="birds"></div>');
				$('#birds').sprite({ fps: 8, no_of_frames: 4 });
				if (flip < 50) {
					flip = 100;
				}
				break;

			case 11:
				$layer.append('<div class="ufo flying" id="heli"></div>');
				$('#heli').sprite({ fps: 8, no_of_frames: 2 });
				if (flip < 50) {
					flip = 100;
				}
				break;

			default:
				$layer.append('<div class="ufo flying"><img src="' + templateDir + '/_/images/flying/fo' + objNum + '.png"></div>');
				if (flip < 50) {
					$('.ufo img').addClass('flipped');
				}
				break;
		}

		if (flip > 50) {
			var startX = $('#main-content').scrollLeft() - $('.ufo').width() - 50,
				endX = $layer.width();
		} else {
			var startX = $('#main-content').scrollLeft() + $(window).width() + 50,
				endX = 0 - $('.ufo').width() - 50;
		}
		var startY = $('#main-content').scrollTop() + ($(window).height() / 2),
			endY = $('#main-content').scrollTop() + (1 + Math.floor(Math.random() * $(window).height())),
			speed = Math.abs(speedMultiply * (endX - startX));
		$('.ufo').css({ 'top': startY, 'left': startX });
		$('.ufo').animate({ 'left': endX, 'top': endY }, speed, 'linear', function () {
			$('.ufo').remove();
			flyingObject();
		})
	}
	img.src = templateDir + '/_/images/flying/fo' + objNum + '.png';
}

function generateMenu() {
	var randNum = 1 + Math.floor(Math.random() * 4);
	if (randNum == 1 || randNum == 2) {
		$('#main-nav').prepend('<div id="menu-shadow' + randNum + '"></div>');
	}
	$('#main-nav').prepend('<div id="menu-char' + randNum + '"></div>');
};

//  function loadContent(url){
// 	var $screen = $('#screen'),
// 		siteURL = "http://" + top.location.host.toString(),
// 		$loading = $('#loading'),
// 		$mainContent = $('#page-content');
// 		/* url = url.substring(1); */
// 		url = url + ' #page';

// 		$mainContent.animate({'opacity':0}, 300, function(){
// 		$loading.fadeIn(100);
// 		$mainContent.load(url, function(){

// 			var adjPageTop = parseInt($screen.css('padding-top')) + parseInt($('#page').css('top'));
// 			var adjPageBottom = parseInt($screen.css('padding-top')) + parseInt($('#page').css('bottom'));
// 			$('#page').css({'top':adjPageTop,'bottom':adjPageBottom});

// 			$('#page a[href^="'+siteURL+'"]').not('a[href$=".jpg"]').each(function(){
// 				$(this).click(function(){
// 					$el = $(this);
// 					loadContent($el.attr('href'));					
// 					return false;
// 				});
// 			});

//  			if($('#page-title-container').length === 0){
//  				$mainContent.prepend('<div id="page-title-container"/>');
//  				$mainContent.append('<div id="sidebar-container"/>');
// 			}else{
// 				$('#page-title-container > h1').remove();
// 				$('#sidebar-container > #sidebar').remove();
// 			}

// 			$('#page-title-container').append($('#page h1:first-child'));
// 			$('#sidebar-container').append($('#page #sidebar'));
// 			var imgNr = $("#page img").length,
// 				nrLoaded = 0;
// 			if (imgNr > 0) {
// 				$("#page img").on('load', function(){

// 				    nrLoaded++;
// 				    if(imgNr === nrLoaded) {
// 						if(typeof doLightBox !== 'undefined' && typeof jQuery !== 'undefined'){
// 						   doLightBox();
// 						}
// 						$loading.fadeOut(100);
// 						$mainContent.animate({opacity:1}, 300);
// 						$('#page').jScrollPane({ verticalDragMaxHeight: 18, mouseWheelSpeed:40, verticalGutter:25 });
// 				    }
// 				});
// 			}else{
// 				$loading.fadeOut(100);
// 				$mainContent.animate({opacity:1}, 300);
// 				$('#page').jScrollPane({ verticalDragMaxHeight: 18, mouseWheelSpeed:40, verticalGutter:25 });
// 			}				
// 		});
// 	});
// }

$(window).load(function () {
	$("#status").delay(200).fadeOut(300, function () {
		var offsetX = ($(window).width() - $('#logo').width()) / 2,
			offsetY = ($(window).height() - $('#logo').height()) / 2;
		$('#main-content').scrollTo($('#logo'), 0, { offset: { top: -offsetY, left: -offsetX } });
		if (deviceType === 'computer') {
			flyingObject(0);
		}
		$("#preloader").fadeOut(300, function () {
			$('#main-content').bind('scroll.firstScroll', function () {
				$('#instructions').fadeOut(300);
				$(this).unbind('scroll.firstScroll');
			})
		});
	});
});

$(document).ready(function () {

	$('#main-content').kinetic();
	$('#main-content').scrollTop(0);
	$('#main-content').scrollLeft(0);

	$('.para').each(function () {
		var $obj = $(this),
			orgX = $obj.position().left,
			orgY = $obj.position().top,
			parentX = $obj.parent().offset().left,
			parentY = $obj.parent().offset().top,
			offsetX = $(window).width() / 2,
			offsetY = $(window).height() / 2,
			speed = $obj.data('speed');
		$('#main-content').scroll(function () {
			var ntop = - (($('#main-content').scrollTop() - parentY + offsetY) * speed - orgY),
				nleft = - (($('#main-content').scrollLeft() - parentX + offsetX) * speed - orgX);
			$obj.css('top', ntop + 'px');
			$obj.css('left', nleft + 'px');
		});
	});

	$('#loading').hide();
	$('#close_butt').hide();

	if (deviceType === 'computer') {
		generateStars('small', 160, 4, '#para2', 'png');
		generateStars('med', 35, 10, '#para3', 'png');
		generateStars('large', 28, 14, '#para4', 'png');
		generateStars('one', 21, 21, '#para4', 'png');
	} else {
		generateStars('small', 100, 4, '#para2', 'png');
		generateStars('med', 25, 10, '#para2', 'png');
	}

	generateMenu();

	var $menuPlanets = $('.menu-planet'),
		$mainContent = $('#page-content'),
		$navLinks = $('#menu-main-navigation a'),
		$screen = $('#screen'),
		siteURL = "http://" + top.location.host.toString(),
		$internalLinks = $('a[href^="' + siteURL + '"]'),
		hash = window.location.hash,
		$el,
		screenAdj,
		URL = '',
		$allLinks = $('a'),
		screenOpen = false;

	var closeSound = $('#close_sound')[0];
	var closeButtSound = $('#close_butt_sound')[0];
	var openSound = $('#open_sound')[0];
	var tangoSound = $('#tango_sound')[0];
	var tvSound = $('#tv_sound')[0];
	var knitSound = $('#knit_sound')[0];
	var fireSound = $('#fire_sound')[0];
	var guitarSound = $('#guitar_sound')[0];
	//on mouse enter
	$('#tango').mouseenter(function () {
		tangoSound.play();
	});
	$('#love_p').mouseenter(function () {
		openSound.play();
	});
	$('#hex_p').mouseenter(function () {
		fireSound.play();
	});
	$('#guitar_p').mouseenter(function () {
		guitarSound.play();
	});
	$('#tv').mouseenter(function () {
		tvSound.play();
	});
	$('#scarf_p').mouseenter(function () {
		knitSound.play();
	});
	// on mouse leaves
	$('#tango').mouseleave(function () {
		tangoSound.pause();
	});
	$('#love_p').mouseleave(function () {
		openSound.pause();
	});
	$('#hex_p').mouseleave(function () {
		fireSound.pause();
	});
	$('#guitar_p').mouseleave(function () {
		guitarSound.pause();
	});
	$('#tv').mouseleave(function () {
		tvSound.pause();
	});
	$('#scarf_p').mouseleave(function () {
		knitSound.pause();
	});

	$('a[href^="' + siteURL + '"]').each(function () {
		$(this).click(function (e) {
			$el = $(this);
			if (screenOpen) {
				loadContent($el.attr('href'));
			}
			e.preventDefault();
		});
	});

	$navLinks.each(function (index, element) {
		var $target = $menuPlanets.eq(index);
		$target.data('link', $(element).attr('href'));
		$(element).click(function (e) {
			if (screenOpen === false) {
				var offsetX = ($(window).width() - $target.width()) / 2,
					offsetY = ($(window).height() - $target.height()) / 2;
				$('#main-content').scrollTo($target, 2400, { offset: { top: -offsetY, left: -offsetX } });
			}
			e.preventDefault();
		});
	});

	// onclick menu 

	// $menuPlanets.each(function(){
	// 	$(this).on('click touchend', function(){
	// 		if(screenOpen === false){
	// 			$this = $(this);
	// 			screenOpen = true;
	// 			$('#main-content').kinetic('detach');
	// 			if($('#page').length === 0){
	// 				$mainContent.prepend('<h1 id="page-title-container"/>');
	// 				$mainContent.append('<div id="sidebar-container"/>');
	// 				// loadContent($this.data('link'));
	// 				//if team is clicked {}
	// 				//if about us clicked {}
	// 				//if portfolio clicked
	// 			}
	// 			openSound.play();
	// 			$screen.animate({top:screenAdj}, 800, function(){
	// 				$('#close_butt').fadeIn();
	// 			});
	// 		}
	// 	});
	// })

	// $('#close_butt').click(function(){
	// 	$(this).spStart();
	// 	openSound.pause();
	// 	closeButtSound.play();
	// 	$mainContent.animate({opacity:0}, 300, function(){
	// 		$mainContent.children().remove();
	// 		closeSound.play();
	// 		$screen.animate({top:'100%'}, 600, function(){
	// 			$('#main-content').kinetic('attach');
	// 			screenOpen = false;
	// 		});
	// 	});
	// })

	// if($(window).width() < 1048){
	// 	var marginX = ( 1048 - $(window).width() )/2;
	// 	$screen.css({'margin-left':-marginX, 'padding-left':marginX, 'padding-right':marginX});
	// }
	// if($(window).height() < 900){
	// 	var paddingY = parseInt((900 - $(window).height())/2);
	// 	$screen.css({'padding-bottom':paddingY, 'padding-top':paddingY});
	// 	$('#close_butt').css('top',paddingY);
	// 	screenAdj = -paddingY;
	// }else if($(window).height() > 900){
	// 	screenAdj = parseInt(($(window).height() - 900)/2);
	// }



	$('#guitar_s').sprite({ fps: 12, no_of_frames: 5 });
	$('#guitar_s2').sprite({ fps: 8, no_of_frames: 5 });
	$('#golf_s').sprite({ fps: 6, no_of_frames: 22 });
	$('#scarf_s').sprite({ fps: 10, no_of_frames: 4 });
	$('#tv_s').sprite({ fps: 8, no_of_frames: 5 });
	$('#circus_sp1').sprite({ fps: 0.5, no_of_frames: 2 });
	$('#circus_sp2').sprite({ fps: 0.8, no_of_frames: 2 });
	$('#hex_s').sprite({ fps: 8, no_of_frames: 3 });
	$('#love_s').sprite({ fps: 10, no_of_frames: 13 });
	$('#egg_sp').sprite({ fps: 4, no_of_frames: 3 });
	$('#menu-char1').sprite({ fps: 4, no_of_frames: 9 });
	$('#menu-char2').sprite({ fps: 4, no_of_frames: 8 });
	$('#close_butt').sprite({
		fps: 12,
		no_of_frames: 4,
		on_last_frame: function (obj) {
			obj.spStop(true); // stop the animation on the last frame
			obj.hide();
		}
	});

	$(window).resize(function () {
		if ($(window).width() < 1048) {
			var marginX = (1048 - $(window).width()) / 2;
			$screen.css({ 'margin-left': -marginX, 'padding-left': marginX, 'padding-right': marginX });
		}
		if ($(window).height() < 900) {
			var paddingY = parseInt((900 - $(window).height()) / 2);
			$screen.css({ 'padding-bottom': paddingY, 'padding-top': paddingY })
			if (screenOpen === true) {
				$screen.css({ 'top': -paddingY });
				$('#page').css({ 'top': 140 + paddingY, 'bottom': 140 + paddingY });
			}
			screenAdj = -paddingY;
		} else if ($(window).height() > 900) {
			if (screenOpen === true) {
				screenAdj = parseInt(($(window).height() - 900) / 2);
				$screen.css({ 'top': screenAdj });
			}
		}
		// if(screenOpen === true){
		// 	var scrollapi = $('#page').data('jsp');
		// 	scrollapi.reinitialise();
		// }
	})
});

// custom script
//on skip button
function skip() {
	const intro = document.getElementById("intro");
	intro.style.transition = "1000ms";
	intro.style.opacity = "0";
	intro.style.zIndex = "0";
}
//on vedio end
const video = document.getElementById("int");
video.onended = (event) => { skip() };

function homeclick() {
	var offsetX = ($(window).width() - $('#logo').width()) / 2,
		offsetY = ($(window).height() - $('#logo').height()) / 2;
	$('#main-content').scrollTo($('#logo'), 0, { offset: { top: -offsetY, left: -offsetX } });
	if (deviceType === 'computer') {
		// flying object
		//flyingObject(0);
	}
}
// content for menus
//	modal popup
function pop(){
	document.getElementById("mainmodal").style.transition = "1000ms";
	document.getElementById("mainmodal").style.opacity = "1";
	document.getElementById("mainmodal").style.zIndex = "9999999999999";
}


function teamcont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "Our Team";
	document.getElementById("modal-frame").src = "pages/teams.html";
}
function aboutcont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "";
	document.getElementById("modal-frame").src = "pages/aboutus.html";
}
function packagecont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "Package";
	document.getElementById("modal-frame").src = "pages/package.html";
}
function portfoliocont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "Portfolio";
	document.getElementById("modal-frame").src = "pages/portfolio.html";
}
function servicecont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "Services";
	document.getElementById("modal-frame").src = "pages/service.html";
}
function contactcont() {
	pop();
	document.getElementById("modal-heading").innerHTML = "";
	document.getElementById("modal-frame").src = "pages/contact.html";
}
// close button
document.getElementById("close").addEventListener("click", function () {
	document.getElementById("mainmodal").style.opacity = "0";
	document.getElementById("mainmodal").style.zIndex = "0";
});